<div class="container mx-auto px-4 py-8">
  <!-- Back button -->
  <div class="mb-4">
    <%= link_to persona_pillar_path(@persona, @pillar), class: "text-blue-600 hover:text-blue-800" do %>
      ‚Üê Back to <%= @pillar.name %>
    <% end %>
  </div>

  <h1 class="text-3xl font-bold mb-2">New Cluster</h1>
  <p class="text-zinc-600 mb-8">Create a new content cluster for <%= @pillar.name %></p>

  <%= form_with(model: @cluster, url: persona_pillar_clusters_path(@persona, @pillar), class: "max-w-2xl") do |f| %>
    <% if @cluster.errors.any? %>
      <div class="bg-red-50 border border-red-200 rounded-lg p-4 mb-6">
        <h3 class="font-semibold text-red-800 mb-2">
          <%= pluralize(@cluster.errors.count, "error") %> prohibited this cluster from being saved:
        </h3>
        <ul class="list-disc list-inside text-red-700 text-sm">
          <% @cluster.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="mb-6">
      <%= f.label :name, "Cluster Name", class: "block font-semibold mb-2" %>
      <%= f.text_field :name, 
          class: "w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",
          placeholder: "e.g., Morning Coffee Moments, Golden Hour Walks" %>
      <p class="text-sm text-zinc-500 mt-1">A descriptive name for this content cluster</p>
    </div>

    <div class="mb-6">
      <%= f.label :ai_prompt, "AI Prompt", class: "block font-semibold mb-2" %>
      <%= f.text_area :ai_prompt,
          rows: 6,
          class: "w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",
          placeholder: "Describe the theme, mood, setting, and style for images in this cluster..." %>
      <p class="text-sm text-zinc-500 mt-1">
        This prompt will be used to generate images for this cluster. Be specific about:
        setting, lighting, mood, clothing, activities, etc.
      </p>
    </div>

    <div class="mb-6">
      <%= f.label :status, class: "block font-semibold mb-2" %>
      <%= f.select :status,
          [
            ['Active - Ready for new content', 'active'],
            ['Planning - Still defining', 'planning'],
            ['Paused - Not currently using', 'paused'],
            ['Complete - No more content needed', 'complete']
          ],
          { selected: 'active' },
          class: "w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" %>
    </div>

    <div class="flex gap-4">
      <%= f.submit "Create Cluster", class: "bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 font-semibold cursor-pointer" %>
      <%= link_to "Cancel", persona_pillar_path(@persona, @pillar), class: "bg-zinc-200 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-300 font-semibold" %>
    </div>
  <% end %>
</div>
