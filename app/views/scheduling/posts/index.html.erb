<div class="container mx-auto px-4 py-8">
  <h1 class="text-3xl font-bold mb-6">Create a Post</h1>
  
  <!-- Filters -->
  <%= render CardComponent.new(classes: "mb-6") do |c| %>
    <% c.with_body do %>
      <%= form_with url: scheduling_posts_path, method: :get, class: "flex gap-4" do |f| %>
        <div class="flex-1">
          <%= f.label :persona_id, "Filter by Persona", class: "block text-sm font-medium mb-2" %>
          <%= f.select :persona_id, 
                       options_from_collection_for_select(@personas, :id, :name, params[:persona_id]),
                       { include_blank: "All Personas" },
                       class: "w-full px-3 py-2 bg-zinc-800 border border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500" %>
        </div>
        
        <div class="flex-1">
          <%= f.label :cluster_id, "Filter by Cluster", class: "block text-sm font-medium mb-2" %>
          <%= f.select :cluster_id,
                       options_from_collection_for_select(@clusters, :id, :name, params[:cluster_id]),
                       { include_blank: "All Clusters" },
                       class: "w-full px-3 py-2 bg-zinc-800 border border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500" %>
        </div>
        
        <div class="flex items-end">
          <%= f.submit "Filter", class: "px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors" %>
        </div>
      <% end %>
    <% end %>
  <% end %>
  
  <!-- Photo Grid -->
  <% if @photos.any? %>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <% @photos.each do |photo| %>
        <%= render CardComponent.new(classes: "hover:shadow-lg transition-shadow") do |c| %>
          <% c.with_body do %>
            <!-- Photo Preview -->
            <% if photo.image.attached? %>
              <%= image_tag photo.image, 
                           class: "w-full h-64 object-cover rounded-t-lg mb-4" %>
            <% end %>
            
            <!-- Photo Info -->
            <div class="space-y-2 mb-4">
              <% if photo.persona %>
                <div class="text-sm">
                  <span class="font-semibold">Persona:</span>
                  <span class="text-zinc-400"><%= photo.persona.name.titleize %></span>
                </div>
              <% end %>
              
              <% if photo.cluster %>
                <div class="text-sm">
                  <span class="font-semibold">Cluster:</span>
                  <span class="text-zinc-400"><%= photo.cluster.name %></span>
                </div>
              <% end %>
              
              <div class="text-sm text-zinc-500">
                Uploaded <%= time_ago_in_words(photo.created_at) %> ago
              </div>
            </div>
            
            <!-- Create Post Button -->
            <%= link_to "Create Post", 
                       new_scheduling_post_path(photo_id: photo.id),
                       class: "block w-full text-center px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors" %>
          <% end %>
        <% end %>
      <% end %>
    </div>
  <% else %>
    <%= render CardComponent.new do |c| %>
      <% c.with_body do %>
        <p class="text-zinc-400 text-center py-8">
          No unposted photos available. Upload photos to your clusters first.
        </p>
      <% end %>
    <% end %>
  <% end %>
</div>
