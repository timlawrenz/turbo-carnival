<!DOCTYPE html>
<html class="antialiased">
  <head>
    <title>Turbo Carnival - Image Voting</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="turbo-refresh-method" content="morph">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    
    <!-- Inter font for Catalyst design system -->
    <link rel="preconnect" href="https://rsms.me/">
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
    
    <%= stylesheet_link_tag "tailwind", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>

  <body class="bg-zinc-100 dark:bg-zinc-950 text-zinc-950 dark:text-white">
    <%= render Catalyst::SidebarLayoutComponent.new do |layout| %>
      <% layout.with_sidebar do %>
        <%= render Catalyst::SidebarComponent.new do |sidebar| %>
          <% sidebar.with_header do %>
            <div class="flex items-center gap-3">
              <div class="flex size-8 items-center justify-center rounded-lg bg-blue-600 text-white font-bold text-sm">
                TC
              </div>
              <div class="truncate">
                <h1 class="text-sm/6 font-semibold text-white">Turbo Carnival</h1>
                <p class="text-xs/5 text-zinc-400">Image Pipeline</p>
              </div>
            </div>
          <% end %>

          <% sidebar.with_body do %>
            <!-- Breadcrumb navigation (back links) -->
            <% if navigation_breadcrumbs.any? %>
              <%= render Catalyst::SidebarSectionComponent.new do %>
                <% navigation_breadcrumbs.each do |item| %>
                  <%= render Catalyst::SidebarItemComponent.new(href: item[:path]) do %>
                    <%= item[:label] %>
                  <% end %>
                <% end %>
              <% end %>
            <% end %>

            <!-- Contextual navigation items -->
            <% if navigation_items.any? %>
              <%= render Catalyst::SidebarSectionComponent.new(heading: navigation_section_heading) do %>
                <% navigation_items.each do |item| %>
                  <%= render Catalyst::SidebarItemComponent.new(
                    href: item[:path],
                    current: item[:current]
                  ) do %>
                    <%= item[:label] %>
                  <% end %>
                <% end %>
              <% end %>
            <% end %>
          <% end %>

          <% sidebar.with_footer do %>
            <div class="text-xs text-zinc-400">
              <%= link_to "Settings", "#", class: "hover:text-white" %>
            </div>
          <% end %>
        <% end %>
      <% end %>

      <!-- Flash messages -->
      <% if notice %>
        <div class="mb-6">
          <div class="bg-green-50 dark:bg-green-500/10 border border-green-200 dark:border-green-500/20 rounded-lg p-4 text-green-800 dark:text-green-400">
            <%= notice %>
          </div>
        </div>
      <% end %>
      
      <% if alert %>
        <div class="mb-6">
          <div class="bg-red-50 dark:bg-red-500/10 border border-red-200 dark:border-red-500/20 rounded-lg p-4 text-red-800 dark:text-red-400">
            <%= alert %>
          </div>
        </div>
      <% end %>

      <!-- Main content -->
      <%= yield %>
    <% end %>
  </body>
</html>
